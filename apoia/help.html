<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Manual APOIA</title>
    <link rel="stylesheet" href="style.css">
    <style>
        body { background: #f4f4f7; }
        .help-container { max-width: 960px; margin: 0 auto; padding: 32px 24px 64px; }
        .card { background: #fff; border-radius: 12px; padding: 24px; margin-bottom: 20px; box-shadow: 0 10px 30px rgba(15,23,42,0.08); }
        .card h2 { margin-top: 0; }
        .faq dt { font-weight: 600; margin-top: 16px; }
        .faq dd { margin-left: 0; margin-bottom: 12px; color: #4b5563; }
        .tag { display: inline-flex; align-items: center; gap: 6px; padding: 4px 10px; border-radius: 999px; border: 1px solid; font-size: 0.8rem; }
        .tag-admin { border-color: #2563eb; color: #1d4ed8; }
        .tag-prof { border-color: #10b981; color: #047857; }
        .section-list { list-style: disc; padding-left: 20px; color: #111827; }
        .resource { font-size: 0.85rem; color: #475467; }
    </style>
</head>
<body>
    <div class="help-container">
        <div class="card">
            <h1>Manual APOIA</h1>
            <p class="resource">Este manual explica como operar o sistema e a lógica por trás de cada módulo. Cada seção mostra o que fazer e o que acontece depois da ação.</p>
            <p class="resource">Use Ctrl+P para imprimir a sessão atual ou salvar em PDF.</p>
        </div>

        <div class="card">
            <h2>Manual do Admin <span class="tag tag-admin">Admin + Professor</span></h2>
            <p class="resource">O admin controla cadastros, regras de presença, calendário e relatórios. A lógica do sistema é baseada em turmas, datas e status das presenças.</p>
            <h3>Dashboard (Resumo do dia)</h3>
            <ul class="section-list">
                <li>Presenças e faltas são calculadas a partir da tabela `presencas`. Se você corrigir uma chamada, o resumo muda automaticamente.</li>
                <li>Calendário mostra eventos. Se o dia estiver bloqueado, o professor não consegue lançar chamada naquele dia.</li>
                <li>Notificações: o sino agrega alertas gerados por regras; marcar como lida apenas oculta do painel.</li>
            </ul>
            <h3>Professores</h3>
            <ul class="section-list">
                <li>Ao cadastrar um professor, o sistema cria vínculo de usuário. Sem vínculo, ele não aparece para lançar chamada.</li>
                <li>Efetivo/ACT: efetivos podem ser promovidos automaticamente no novo ano; ACTs ficam inativos se não forem atualizados.</li>
                <li>Reset de senha envia e-mail; se o usuário não confirmar o e-mail, ele continua com acesso pendente.</li>
            </ul>
            <h3>Turmas</h3>
            <ul class="section-list">
                <li>Turma = código + ano letivo. Se duplicar, a consistência acusará erro.</li>
                <li>Ao vincular professor, o professor passa a enxergar a turma no painel e consegue lançar chamada.</li>
                <li>Eventos por turma: se o evento tiver exceções, a chamada do dia é bloqueada somente para as turmas marcadas.</li>
            </ul>
            <h3>Alunos</h3>
            <ul class="section-list">
                <li>Aluno sem turma não entra nas chamadas. O painel de consistência mostra esses casos.</li>
                <li>Status do aluno (ativo/inativo) controla se ele aparece em filtros e relatórios.</li>
                <li>Histórico mostra datas e justificativas. Se você alterar uma falta, a assiduidade é recalculada.</li>
            </ul>
            <h3>Acompanhamento APOIA</h3>
            <ul class="section-list">
                <li>Registro manual gera entradas de acompanhamento que não dependem da chamada.</li>
                <li>Se o status for “Finalizado”, o aluno deixa de aparecer nos filtros de acompanhamento ativo.</li>
                <li>Relatório APOIA consolida por período e pode ser impresso em PDF.</li>
            </ul>
            <h3>Calendário</h3>
            <ul class="section-list">
                <li>Eventos globais bloqueiam todas as turmas; eventos específicos bloqueiam somente as turmas selecionadas.</li>
                <li>Se o evento for intervalo (data início e fim), todas as datas do intervalo ficam bloqueadas.</li>
            </ul>
            <h3>Ano Letivo</h3>
            <ul class="section-list">
                <li>Promover turmas move alunos e atualiza vínculos. Professores ACT não são promovidos automaticamente.</li>
                <li>Depois da promoção, sempre revise turmas duplicadas no painel de consistência.</li>
            </ul>
            <h3>Relatórios de Faltas</h3>
            <ul class="section-list">
                <li>Filtros por data, turma, aluno e professor. Quanto mais filtros, mais preciso o relatório.</li>
                <li>Se o professor lançou falta e você corrige, o relatório já reflete a correção.</li>
                <li>Exportação em PDF mantém o layout e cabeçalhos.</li>
            </ul>
            <h3>Consistência</h3>
            <ul class="section-list">
                <li>Alunos sem turma: não aparecem na chamada; resolva vinculando a turma.</li>
                <li>Professores sem turma: não conseguem lançar chamada.</li>
                <li>Turmas duplicadas: geram conflito em filtros e relatórios.</li>
            </ul>
            <h3>Configurações e Notificações</h3>
            <ul class="section-list">
                <li>Alertas de faltas consecutivas/intercaladas geram notificações para o admin.</li>
                <li>Notificação é criada no dia seguinte ao gatilho (ex.: 5 faltas seguidas até dia 15). No início do mês, o sistema reinicia a contagem mensal.</li>
                <li>Configurações gerais permitem ajustar dados da escola e parâmetros globais do sistema.</li>
            </ul>
        </div>

        <div class="card">
            <h2>Manual do Professor <span class="tag tag-prof">Somente Professor</span></h2>
            <ul class="section-list">
                <li>Selecione a turma e a data. Se a data estiver bloqueada no calendário, o sistema impede o lançamento.</li>
                <li>Marque presença/falta. Ao marcar falta, escolha justificativa. Sem justificativa, a falta é registrada como injustificada.</li>
                <li>“Marcar todos presentes” preenche automaticamente; revise antes de salvar.</li>
                <li>Ao salvar, o sistema grava por aluno. Se salvar novamente na mesma data, ele atualiza a chamada.</li>
                <li>Link “App do Professor” abre o aplicativo. Se o APK for atualizado, basta instalar por cima.</li>
            </ul>
        </div>

        <div class="card">
            <h2>FAQ inteligente</h2>
            <p class="resource">Abaixo está a base de perguntas frequentes. Para tornar “inteligente”, podemos integrar Gemini/Qwen e responder com contexto do sistema.</p>
            <h3>Perguntas frequentes</h3>
            <dl class="faq">
                <dt>Por que não consigo lançar chamada em um dia?</dt>
                <dd>Esse dia está bloqueado no calendário (evento global ou exceção por turma). Remova o evento ou ajuste a exceção.</dd>
                <dt>Se eu corrigir uma chamada, o que muda?</dt>
                <dd>O sistema atualiza a linha de presença e recalcula assiduidade, faltas e relatórios imediatamente.</dd>
                <dt>Como funcionam as notificações de faltas?</dt>
                <dd>As regras geram notificações quando atingem o limite. Ex.: 5 faltas seguidas ou 7 intercaladas no mês → notificação no dia seguinte.</dd>
                <dt>Por que o professor não aparece para a turma?</dt>
                <dd>Falta vínculo professor-turma. Verifique o módulo Professores e associe a turma correta.</dd>
                <dt>O que significa “professor sem turma”?</dt>
                <dd>O professor está ativo, mas sem vínculo. Ele não consegue lançar chamadas até ser vinculado.</dd>
            </dl>
        </div>
    </div>
</body>
</html>
